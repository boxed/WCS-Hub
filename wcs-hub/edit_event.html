<!doctype html>
<html ng-app="WCSHub">
    <head>
        <title>Edit event</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js"></script>
        <script src="/static/wcs.js"></script>
        <link href="/static/style.css" rel="stylesheet"/>
        <script>
            $(function() {
                $( ".datepicker" ).datepicker({dateFormat:'yy-mm-dd'});
            });
        </script>
    </head>
    <body ng-controller="EditEventCtrl" >
        <div class="menu">
            <a href="/" id="base">WCS-Hub</a>
            <ul id="root_menu">
                <li>
                    <ul>
                        <li><a href="/">Register for an event</a></li>
                        <li><a href="/create_event/">Create event</a></li>
                    </ul>
                    <ul class="menu_heading"><li>Events</li></ul>
                </li>

                <li>
                    <ul>
                        <li><a href="/finals/">Finals</a></li>
                    </ul>
                    <ul class="menu_heading"><li>Competition tools</li></ul>
                </li>

                <li>
                    <ul>
                        <li><a href="https://github.com/boxed/WCS-Hub/">Source code</a></li>
                        <li ><a href="http://kodare.net/blog/">Kodare.net blog</a></li>
                    </ul>
                    <ul class="menu_heading"><li>About WCS-Hub</li></ul>
                </li>

            </ul>
        </div>

        <div id="preview" class="container" style="float: right">
            <h1>Preview of sign up form</h1>
            <div id="preview-contents" data-ng-include data-src src="'/static/sign_up.html'"></div>
        </div>
        <div class="container">
            <h1>Edit event</h1>

            <table>
                <tr><td><label for="name">Event name:</label></td><td><input id="name" ng-model="event.name" type="text" /></td></tr>
                <tr><td><label for="name">Description/extra information:</label></td><td><textarea id="name" ng-model="event.description" type="text"></textarea></td></tr>
                <tr><td><label for="event_date">Event start date:</label></td><td><input id="event_date" class="datepicker" ng-model="event.date" ui-date /></td></tr>
                <tr><td><label for="registration_opens">Registration opens:</label></td><td><input id="registration_opens" class="datepicker" ng-model="event.registration_opens" ui-date /></td></tr>
                <tr><td><label for="registration_closes">Registration closes:</label></td><td><input id="registration_closes" class="datepicker" ng-model="event.registration_closes" ui-date /></td></tr>
            </table>

            <table>
                <tr><td colspan="2"><h3>Available competitions</h3></td></tr>

                <tr>
                    <th ng-repeat="(group, competitions) in event.competitions">
                        {{ group }}
                    </th>
                </tr>

                <tr>
                    <td ng-repeat="(group, competitions) in event.competitions">
                        <span ng-repeat="comp in competitions" checkbox ng-title="comp.name" ng-model="comp.show"></span>
                    </td>
                </tr>
            </table>

            <br />

            <span class="button" ng-click="save()">Save</span>

            {{ errors }}
        </div>
    </body>
</html>